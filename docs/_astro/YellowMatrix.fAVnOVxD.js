import{_ as p,p as A}from"./hooks.module.obzsRR2F.js";import{l as m,g as C}from"./preact.module.dOkjm3yY.js";var I=0;function w(n,l,a,o,s,f){var r,t,i={};for(t in l)t=="ref"?r=l[t]:i[t]=l[t];var c={type:n,props:i,key:a,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--I,__i:-1,__u:0,__source:s,__self:f};if(typeof n=="function"&&(r=n.defaultProps))for(t in r)i[t]===void 0&&(i[t]=r[t]);return m.vnode&&m.vnode(c),c}const M=.8,E=.4,x=.975,R="#ff0",u=10,T=.04,D="arial",S="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789@#$%^&*()*&^%+-/~",F=50;function y(){const n=p(),l=S.split("");let a=c(),o=[],s=[],f=0,r=0,t=null,i=!0;function c(){const e=typeof window<"u",d=e?window.innerWidth:0,_=e?window.innerHeight:0;return{width:d,height:_}}function v(){cancelAnimationFrame(r),t.fillStyle="rgba(0, 0, 0, "+T+")",t.fillRect(0,0,n.current.width,n.current.height),t.fillStyle=R,t.font=u+"px "+D;for(var e=0;e<o.length;e++){var d=l[Math.floor(Math.random()*l.length)];t.fillText(d,e*u,o[e]*u),o[e]*u>n.current.height&&Math.random()>x&&(o[e]=0,s[e]=M+Math.random()*E),o[e]+=s[e]}r=requestAnimationFrame(v)}const h=()=>{console.log("resize"),a=c(),n.current.height=a.height,n.current.width=a.width,f=n.current.width/u;for(var e=o.length;e<f;e++)o[e]=window.innerHeight,s[e]=M+Math.random()*E;o=o.slice(0,e),s=s.slice(0,e)};function g(){i==!0&&console.log("scroll");const e=document.querySelector("#page-header"),d=document.documentElement,_=d.clientHeight-d.scrollTop-e.offsetHeight-F;_<0&&i==!0&&(console.log("dropping Matrix Canvas Events"),removeEventListener("resize",h),i=!1,cancelAnimationFrame(r)),_>=0&&i==!1&&(console.log("re-init Matrix Canvas Events"),a=c(),n.current.width!=a.width&&h(),window.addEventListener("resize",h),i=!0,r=requestAnimationFrame(v))}return A(()=>(console.log("Yellow Matrix MATRIX is LOADED !!!!!!!!  MATRIXXX  !!!!!!"),n.current&&(t=n.current.getContext("2d")),h(),r=requestAnimationFrame(v),window.addEventListener("resize",h),document.addEventListener("scroll",g),removeEventListener("scroll",g)),[]),w(C,{children:w("canvas",{id:"matrix_canvas",height:a.height,width:a.width,style:"position: absolute; width: 100%; height: 100%;",ref:n})})}export{y as YellowMatrix};
